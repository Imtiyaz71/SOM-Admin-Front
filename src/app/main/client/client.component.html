<div class="client-page">

  <!-- Add/Edit Company Form -->
  <div class="client-form-card">
    <h2>{{ company.id ? 'Edit Company' : 'Add New Company' }}</h2>
    <form (ngSubmit)="saveCompany()">
      <div class="form-group">
        <label>Company ID</label>
        <input type="number" readonly [(ngModel)]="company.id" name="id" />
      </div>
      <div class="form-group">
        <label>Company Name</label>
        <input type="text" [(ngModel)]="company.cName" name="cName" required />
      </div>
      <div class="form-group">
        <label>Phone</label>
        <input type="text" [(ngModel)]="company.cPhone" name="cPhone" required />
      </div>
      <div class="form-group">
        <label>Email</label>
        <input type="email" [(ngModel)]="company.cEmail" name="cEmail" required />
      </div>
      <div class="form-group">
        <label>Website</label>
        <input type="text" [(ngModel)]="company.cWebsite" name="cWebsite" />
      </div>
      <div class="form-group">
        <label>Address</label>
        <input type="text" [(ngModel)]="company.cAddress" name="cAddress" />
      </div>
      <div class="form-group">
        <label>Logo</label>
        <input type="file" (change)="onLogoChange($event)" />
        <div *ngIf="company.cLogo">
          <img [src]="company.cLogo" alt="Logo Preview" width="80" height="60" class="logo-preview" />
        </div>
      </div>
      <button type="submit" class="btn-submit">{{ company.id ? 'Update' : 'Add' }}</button>
    </form>

    <p class="success-msg" *ngIf="successMsg">{{ successMsg }}</p>
    <p class="error-msg" *ngIf="errorMsg">{{ errorMsg }}</p>
  </div>

  <!-- Companies List -->
  <div class="company-list-card">
    <h2>Company List</h2>
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Phone</th>
          <th>Email</th>
          <th>Website</th>
          <th>Address</th>
          <th>Logo</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let c of paginatedCompanies">
          <td>{{ c.id }}</td>
          <td>{{ c.cName }}</td>
          <td>{{ c.cPhone }}</td>
          <td>{{ c.cEmail }}</td>
          <td>{{ c.cWebsite }}</td>
          <td>{{ c.cAddress }}</td>
          <td>
            <img *ngIf="c.cLogo" [src]="c.cLogo" alt="{{c.cName}}" class="logo-img" />
          </td>
          <td>
            <button (click)="editCompany(c)">Edit</button>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- Pagination -->
    <div class="pagination">
      <button (click)="prevPage()" [disabled]="page === 1">Prev</button>
      <button *ngFor="let _ of totalPagesArray(); let i = index"
              (click)="goToPage(i+1)" [class.active]="page === i+1">{{ i+1 }}</button>
      <button (click)="nextPage()" [disabled]="page === totalPages">Next</button>
    </div>
  </div>
</div>
